<app-layout [withBackButton]="true" (backButtonAction)="returnToHome()">
    <ng-container role="header">
        <span class="title">Historique des parties</span>
    </ng-container>

    <ng-container role="body">
        <loading-spinner [loading]="loading" caption="Chargement de la liste des parties"></loading-spinner>

        <cdk-virtual-scroll-viewport itemSize="80" class="match-history">
            <div *cdkVirtualFor="let match of (dataSource | async); trackBy: trackByMatchId" class="result-list" (click)="goToHistoryDetail(match)">
                @if (match) {
                <div class="visual">
                    <img src="{{ match.game.thumbnailUrl }}">
                </div>
                }
                @if (match) {
                <div class="content">
                    <span class="heading">{{ match.game.title }}</span>
                    <span class="supporting" [innerHtml]="line(match)"></span>
                </div>
                } @else {
                    <loading-spinner [loading]="true" caption="Chargement..."></loading-spinner>
                }
            </div>
        </cdk-virtual-scroll-viewport>
    </ng-container>
</app-layout>