<app-layout [withBackButton]="true" (backButtonAction)="cancelGameSelection()">
    <ng-container role="header">
        <span class="title">Selection des joueurs</span>
        <button mat-icon-button>
            <mat-icon>more_vert</mat-icon>
        </button>
    </ng-container>

    <ng-container role="body">

        <loading-spinner [loading]="loading" caption="Chargement de la liste des joueurs"></loading-spinner>

        <div *ngIf="!loading">

            <div class="headline">
                <span class="choice">Jeux: {{ gameTitle }}</span>
                <span class="menu-spacer"></span>
                <button mat-icon-button>
                    <mat-icon>filter_list</mat-icon>
                </button>
            </div>

            <fieldset>
                <div class="row">
                    <div class="column">
                        <mat-form-field appearance="fill">
                            <mat-label>Ajouter un joueur</mat-label>
                            <mat-select (selectionChange)="actionPlayer($event.value)" #playerSelector>
                                <mat-option value="search"><mat-icon>search</mat-icon>Chercher un joueur...</mat-option>
                                <mat-option value="team"><mat-icon>groups</mat-icon>Cr√©er un groupe...</mat-option>
                                <mat-divider></mat-divider>
                                <mat-option *ngFor="let choosingPlayer of filteredChoosablePlayers"
                                    [value]="choosingPlayer">
                                    {{choosingPlayer.pseudo}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <div class="row" style="flex-direction: row-reverse;">
                    <button mat-flat-button color="primary" (click)="cancelMatchCreation()">Continuer</button>
                    <button mat-flat-button (click)="cancelMatchCreation()">Cancel</button>
                </div>
            </fieldset>

            <mat-divider></mat-divider>

            <div *ngFor="let player of players" mat-ripple>
                <div class="row">
                    <div class="column">
                        <swipeable-element
                            [rightWipeStyle]='{backgroundColor: "lightcoral", icon: "delete_outline", text: "Supprimer"}'
                            [leftWipeStyle]='{backgroundColor: "lightcoral", icon: "delete_outline", text: "Supprimer"}'
                            (rightSwipeEvent)="deleteAction(player)"
                            (leftSwipeEvent)="deleteAction(player)">
                            <div class="player">
                                <div class="avatar">
                                    <img src="https://www.gravatar.com/avatar/{{player.avatar}}?d=identicon&r=pg"
                                        style="border-radius: 50%; height:50px; width:50px;">
                                </div>
                                <div class="pseudo">
                                    {{player.name}}
                                </div>
                                <span class="menu-spacer"></span>
                                <div class="mover">
                                    <button mat-icon-button>
                                        <mat-icon>drag_handle</mat-icon>
                                    </button>
                                </div>
                            </div>
                        </swipeable-element>

                    </div>
                </div>
                <mat-divider></mat-divider>
            </div>
        </div>
    </ng-container>

</app-layout>