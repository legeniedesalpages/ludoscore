<app-layout [withBackButton]="true" (backButtonAction)="returnToGame()">
    <ng-container role="header">
        <span class="title">Fin de partie</span>
    </ng-container>

    <ng-container role="body">
        <div class="score">Saisie des scores</div>
        <ul class="player-list">
            <div *ngFor="let player of (matchState | async)?.players" class="result-list">
                <li class="player" (click)="setPlayerScore(player)">
                    <div class="player-name">
                        <div *ngIf="player.score != undefined"><mat-icon class="check">done</mat-icon></div>
                        <div *ngIf="player.score == undefined"><mat-icon class="cancel">cancel</mat-icon></div>
                        {{ player.name }}
                        <span *ngIf="player.score">(score: {{ player.score }})</span>
                    </div>
                </li>
            </div>
        </ul>

        <mat-form-field appearance="fill" class="winner">
            <mat-label>Et le vainqueur est...</mat-label>
            <mat-select (valueChange)="selectWiningPlayer($event.value)" [value]="(matchState | async)?.winnigPlayer">
                <mat-option *ngFor="let winningPlayer of (matchState | async)?.players" [value]="winningPlayer">
                    {{winningPlayer.name}}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <div class="buttons">
            <button mat-raised-button color="primary" (click)="endMatch()">Enregistrer et mettre fin à la
                partie</button>
            <button mat-raised-button color="warn" (click)="abortMatch()">Le match est abandonné</button>
        </div>

    </ng-container>

</app-layout>